(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69973,e=>{"use strict";let t=(0,e.i(15315).default)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],69973)},25938,e=>{"use strict";let t=(0,e.i(15315).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],25938)},64460,e=>{"use strict";var t=e.i(73942),a=e.i(28787),s=e.i(31247),r=e.i(8013),l=e.i(36209),d=e.i(74898),i=e.i(15315);let c=(0,i.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),n=(0,i.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var o=e.i(69973),x=e.i(69553),m=e.i(25938);function h(){let e=(0,r.createClient)(),i=(0,s.useRouter)(),[h,u]=(0,a.useState)(""),[b,p]=(0,a.useState)(""),[g,y]=(0,a.useState)(""),[f,j]=(0,a.useState)(!1),[v,N]=(0,a.useState)(""),[w,k]=(0,a.useState)(!1),[D,E]=(0,a.useState)(null);async function T(){if("DELETE"===v&&g){k(!0),E(null);try{let{error:t}=await e.from("credentials").delete().eq("user_id",g);t&&console.error("Failed to delete credentials:",t.message);let{error:a}=await e.from("agent_profiles").delete().eq("user_id",g);a&&console.error("Failed to delete agent profiles:",a.message);let{error:s}=await e.from("profiles").delete().eq("id",g);if(s)throw Error(`Failed to delete profile: ${s.message}`);try{for(let e of[`tacit-${g}`])indexedDB.deleteDatabase(e)}catch{}await e.auth.signOut(),i.replace("/login")}catch(e){console.error("Account deletion error:",e),E(e instanceof Error?e.message:"Failed to delete account. Please try again."),k(!1)}}}return(0,a.useEffect)(()=>{!async function(){let{data:{user:t}}=await e.auth.getUser();if(t&&(u(t.email||""),y(t.id)),t){let{data:a}=await e.from("profiles").select("did").eq("id",t.id).single();a&&p(a.did)}}()},[e]),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-1",children:"Settings"}),(0,t.jsx)("p",{className:"text-text-muted mb-8",children:"Manage your account and security preferences"}),(0,t.jsxs)("div",{className:"max-w-2xl space-y-6",children:[(0,t.jsxs)("div",{className:"bg-bg-card border border-border rounded-2xl p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(l.Settings,{className:"w-5 h-5 text-accent"}),(0,t.jsx)("h3",{className:"font-semibold",children:"Account"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-text-muted",children:"Email"}),(0,t.jsx)("p",{className:"text-sm font-medium",children:h})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-text-muted",children:"DID"}),(0,t.jsx)("p",{className:"text-xs font-mono break-all",children:b})]})]})]}),(0,t.jsxs)("div",{className:"bg-bg-card border border-border rounded-2xl p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(c,{className:"w-5 h-5 text-warning"}),(0,t.jsx)("h3",{className:"font-semibold",children:"Security"})]}),(0,t.jsx)("p",{className:"text-sm text-text-muted mb-3",children:"Your private key is stored in this browser's IndexedDB. It never leaves your device. If you clear browser data, you will need to re-mint your identity."}),(0,t.jsx)("div",{className:"p-3 bg-warning/5 border border-warning/20 rounded-xl",children:(0,t.jsx)("p",{className:"text-xs text-warning",children:"Key backup and recovery is coming in a future update. For now, your identity is tied to this browser. Do not clear site data."})})]}),(0,t.jsxs)("div",{className:"bg-bg-card border border-border rounded-2xl p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(d.Shield,{className:"w-5 h-5 text-accent"}),(0,t.jsx)("h3",{className:"font-semibold",children:"TACIT Protocol"})]}),(0,t.jsx)("div",{className:"space-y-2",children:[{label:"Protocol Website",href:"https://tacitprotocol.com"},{label:"GitHub",href:"https://github.com/tacitprotocol"},{label:"Documentation",href:"https://github.com/tacitprotocol/tacit"},{label:"X / Twitter",href:"https://x.com/tacitprotocol"}].map(({label:e,href:a})=>(0,t.jsxs)("a",{href:a,target:"_blank",rel:"noopener",className:"flex items-center justify-between p-2 rounded-lg hover:bg-bg-elevated transition-colors text-sm",children:[e,(0,t.jsx)(o.ExternalLink,{className:"w-3.5 h-3.5 text-text-muted"})]},e))})]}),(0,t.jsxs)("div",{className:"bg-bg-card border border-danger/30 rounded-2xl p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)(n,{className:"w-5 h-5 text-danger"}),(0,t.jsx)("h3",{className:"font-semibold text-danger",children:"Danger Zone"})]}),(0,t.jsx)("p",{className:"text-sm text-text-muted mb-4",children:"Deleting your account will permanently remove your profile, credentials, and all associated data. Your DID will be revoked."}),D&&(0,t.jsxs)("div",{className:"mb-4 p-3 bg-danger/10 border border-danger/30 rounded-xl text-sm text-danger flex items-start gap-2",children:[(0,t.jsx)(m.AlertCircle,{className:"w-4 h-4 mt-0.5 shrink-0"}),D]}),f?(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("p",{className:"text-sm text-danger font-medium",children:"Type DELETE to confirm account deletion:"}),(0,t.jsx)("input",{type:"text",value:v,onChange:e=>N(e.target.value),className:"w-full bg-bg border border-danger/30 rounded-xl px-4 py-2.5 text-text focus:outline-none focus:border-danger text-sm",placeholder:"Type DELETE",disabled:w}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("button",{onClick:T,disabled:"DELETE"!==v||w,className:"flex items-center gap-2 text-sm text-white bg-danger hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed px-4 py-2 rounded-xl transition-colors",children:[w&&(0,t.jsx)(x.Loader2,{className:"w-4 h-4 animate-spin"}),w?"Deleting...":"Permanently Delete"]}),(0,t.jsx)("button",{onClick:()=>{j(!1),N(""),E(null)},disabled:w,className:"text-sm text-text-muted hover:text-text px-4 py-2 rounded-xl transition-colors",children:"Cancel"})]})]}):(0,t.jsx)("button",{onClick:()=>j(!0),className:"text-sm text-danger border border-danger/30 hover:bg-danger/10 px-4 py-2 rounded-xl transition-colors",children:"Delete Account"})]})]})]})}e.s(["default",()=>h],64460)}]);