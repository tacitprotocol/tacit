(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43085,e=>{"use strict";let t,n,r,s,i=(e,t)=>t.some(t=>e instanceof t),o=new WeakMap,a=new WeakMap,c=new WeakMap,u={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return d(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){if(e instanceof IDBRequest){let t;return t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(d(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)}),c.set(t,e),t}if(a.has(e))return a.get(e);let t=function(e){if("function"==typeof e)return(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(l(this),t),d(this.request)}:function(...t){return d(e.apply(l(this),t))};return(e instanceof IDBTransaction&&function(e){if(o.has(e))return;let t=new Promise((t,n)=>{let r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});o.set(e,t)}(e),i(e,r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(e,u):e}(e);return t!==e&&(a.set(e,t),c.set(t,e)),t}let l=e=>c.get(e),f=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],h=new Map;function p(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(h.get(t))return h.get(t);let n=t.replace(/FromIndex$/,""),r=t!==n,s=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||f.includes(n)))return;let i=async function(e,...t){let i=this.transaction(e,s?"readwrite":"readonly"),o=i.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),s&&i.done]))[0]};return h.set(t,i),i}u={...t=u,get:(e,n,r)=>p(e,n)||t.get(e,n,r),has:(e,n)=>!!p(e,n)||t.has(e,n)};let g=["continue","continuePrimaryKey","advance"],D={},y=new WeakMap,w=new WeakMap,I={get(e,t){if(!g.includes(t))return e[t];let n=D[t];return n||(n=D[t]=function(...e){y.set(this,w.get(this)[t](...e))}),n}};async function*B(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;let n=new Proxy(t,I);for(w.set(n,t),c.set(n,l(t));t;)yield n,t=await (y.get(n)||t.continue()),y.delete(n)}function v(e,t){return t===Symbol.asyncIterator&&i(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&i(e,[IDBIndex,IDBObjectStore])}u={...n=u,get:(e,t,r)=>v(e,t)?B:n.get(e,t,r),has:(e,t)=>v(e,t)||n.has(e,t)};let m="tacit-data";class E{dbName;db=null;constructor(e){this.dbName=e}async getDb(){return this.db||(this.db=await function(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){let o=indexedDB.open(e,1),a=d(o);return r&&o.addEventListener("upgradeneeded",e=>{r(d(o.result),e.oldVersion,e.newVersion,d(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}(this.dbName,0,{upgrade(e){e.objectStoreNames.contains(m)||e.createObjectStore(m)}})),this.db}async get(e){let t=await this.getDb();return await t.get(m,e)??null}async set(e,t){let n=await this.getDb();await n.put(m,t,e)}async delete(e){let t=await this.getDb();return void 0!==await t.get(m,e)&&(await t.delete(m,e),!0)}async list(e){let t=await this.getDb();return(await t.getAllKeys(m)).filter(t=>t.startsWith(e))}async close(){this.db&&(this.db.close(),this.db=null)}}e.s(["IndexedDBBackend",()=>E],43085)}]);