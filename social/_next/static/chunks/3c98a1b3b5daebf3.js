(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31247,(e,t,i)=>{t.exports=e.r(72473)},25938,e=>{"use strict";let t=(0,e.i(15315).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>t],25938)},34223,e=>{"use strict";var t=e.i(73942),i=e.i(28787),r=e.i(31247),a=e.i(8013),n=e.i(74898),s=e.i(69553),l=e.i(25938);function o(){let e=(0,r.useRouter)(),o=(0,a.createClient)(),[c,u]=(0,i.useState)(null),[d,m]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{let t=setTimeout(()=>m(!0),8e3),i=setTimeout(()=>{u("Verification is taking too long. Please try logging in again.")},2e4);return async function(){try{let t=window.location.hash.substring(1);if(t){let e=new URLSearchParams(t),i=e.get("access_token"),r=e.get("refresh_token"),a=e.get("error"),n=e.get("error_description");if(a)return void u(n||`Authentication error: ${a}`);if(i&&r){let e=i.split(".");if(3!==e.length)return void u("Invalid authentication token received. Please try again.");try{let t=JSON.parse(atob(e[1]));if(t.exp&&1e3*t.exp<Date.now())return void u("Your login link has expired. Please request a new one.")}catch{}let{error:t}=await o.auth.setSession({access_token:i,refresh_token:r});if(t)return void u(`Session error: ${t.message}. Please try logging in again.`)}}let{data:{user:i},error:r}=await o.auth.getUser();if(r||!i)return void u("Could not verify your identity. Please try logging in again.");let{data:a}=await o.from("profiles").select("id, onboarding_complete").eq("id",i.id).maybeSingle();a?.onboarding_complete?e.replace("/dashboard"):e.replace("/onboarding")}catch(e){console.error("Callback error:",e),u("An unexpected error occurred. Please try logging in again.")}finally{clearTimeout(t),clearTimeout(i)}}(),()=>{clearTimeout(t),clearTimeout(i)}},[e,o]),c)?(0,t.jsx)("div",{className:"min-h-screen bg-bg flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center max-w-sm",children:[(0,t.jsx)(l.AlertCircle,{className:"w-12 h-12 text-danger mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Verification Failed"}),(0,t.jsx)("p",{className:"text-text-muted text-sm mb-6",children:c}),(0,t.jsx)("button",{onClick:()=>e.replace("/login"),className:"bg-accent hover:bg-accent-bright text-white px-5 py-2.5 rounded-xl font-medium transition-colors",children:"Back to Login"})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-bg flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(n.Shield,{className:"w-12 h-12 text-accent mx-auto mb-4 animate-pulse"}),(0,t.jsx)(s.Loader2,{className:"w-6 h-6 text-text-muted animate-spin mx-auto mb-3"}),(0,t.jsx)("p",{className:"text-text-muted",children:"Verifying your identity..."}),d&&(0,t.jsx)("p",{className:"text-text-muted text-xs mt-3",children:"Still working... this is taking longer than usual."})]})})}e.s(["default",()=>o])}]);