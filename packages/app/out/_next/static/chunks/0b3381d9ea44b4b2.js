(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37214,e=>{"use strict";let t=(0,e.i(15315).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],37214)},72393,e=>{"use strict";let t=(0,e.i(15315).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],72393)},51639,e=>{"use strict";var t=e.i(73942),s=e.i(28787),a=e.i(8013),r=e.i(59776),l=e.i(37214),i=e.i(74898),d=e.i(61776),n=e.i(23082),c=e.i(69553),o=e.i(72393);function m(){let e=(0,a.createClient)(),[m,x]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[g,b]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!0),[j,N]=(0,s.useState)(null),[v,y]=(0,s.useState)(""),[w,_]=(0,s.useState)(""),[S,k]=(0,s.useState)(null),[C,L]=(0,s.useState)(null),[q,T]=(0,s.useState)(new Set),[F,P]=(0,s.useState)(null);async function $(t){return e.from("profiles").select("id, did, display_name, bio, avatar_url, trust_score, trust_level, seeking, offering, domain").eq("onboarding_complete",!0).order("trust_score",{ascending:!1}).range(t,t+24-1)}async function U(){b(!0);let{data:e,error:t}=await $(m.length);t?console.error("Failed to load more:",t.message):e&&(x(t=>[...t,...e]),f(24===e.length)),b(!1)}async function A(t){L(t),P(null);let{error:s}=await e.from("engagement_requests").insert({user_id:w,target_id:t,request_type:"introduction",status:"pending"});s?(console.error("Failed to send request:",s.message),P("Failed to send introduction request.")):T(e=>new Set(e).add(t)),L(null)}(0,s.useEffect)(()=>{!async function(){let{data:{user:t}}=await e.auth.getUser();t&&_(t.id);let[s,a]=await Promise.all([$(0),t?e.from("engagement_requests").select("target_id").eq("user_id",t.id):Promise.resolve({data:[],error:null})]);s.error&&(console.error("Failed to load profiles:",s.error.message),N("Failed to load network members. Please refresh the page.")),s.data&&(x(s.data),f(24===s.data.length)),a.data&&T(new Set(a.data.map(e=>e.target_id))),h(!1)}()},[e]);let B=m.filter(e=>{if(e.id===w)return!1;if(!v)return!0;let t=v.toLowerCase();return e.display_name.toLowerCase().includes(t)||e.bio?.toLowerCase().includes(t)||e.seeking?.toLowerCase().includes(t)||e.offering?.toLowerCase().includes(t)});return(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-1",children:"Discover"}),(0,t.jsx)("p",{className:"text-text-muted mb-8",children:"Browse verified members of the TACIT network. Everyone here has a cryptographic identity."}),(j||F)&&(0,t.jsx)("div",{className:"mb-6 p-3 bg-danger/10 border border-danger/30 rounded-xl text-sm text-danger",children:j||F}),(0,t.jsxs)("div",{className:"relative mb-6",children:[(0,t.jsx)(l.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted"}),(0,t.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),placeholder:"Search by name, skills, or what people are seeking...",className:"w-full bg-bg-card border border-border rounded-xl pl-12 pr-4 py-3 text-text focus:outline-none focus:border-accent"})]}),u?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(c.Loader2,{className:"w-8 h-8 text-accent animate-spin"})}):0===B.length?(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)(n.Users,{className:"w-12 h-12 text-text-muted mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:v?"No matches found":"No members yet"}),(0,t.jsx)("p",{className:"text-text-muted text-sm",children:v?"Try a different search term":"Be one of the first to join the verified network!"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:B.map(e=>(0,t.jsxs)("div",{onClick:()=>k(S===e.id?null:e.id),className:`bg-bg-card border rounded-2xl p-5 transition-colors cursor-pointer ${S===e.id?"border-accent/40":"border-border hover:border-border-bright"}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-bg-elevated flex items-center justify-center overflow-hidden",children:e.avatar_url?(0,t.jsx)("img",{src:e.avatar_url,alt:e.display_name,className:"w-full h-full object-cover"}):(0,t.jsx)("span",{className:"text-sm font-bold text-text-muted",children:e.display_name.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:e.display_name}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-text-muted",children:[(0,t.jsx)(i.Shield,{className:"w-3 h-3"}),"Score: ",e.trust_score]})]})]}),(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${"trusted"===e.trust_level||"exemplary"===e.trust_level?"bg-success/10 text-success":"established"===e.trust_level?"bg-accent/10 text-accent":"bg-bg-elevated text-text-muted"}`,children:e.trust_level})]}),e.bio&&(0,t.jsx)("p",{className:`text-sm text-text-muted mb-3 ${S===e.id?"":"line-clamp-2"}`,children:e.bio}),(0,t.jsxs)("div",{className:"space-y-1.5 mb-4",children:[e.seeking&&(0,t.jsxs)("div",{className:"flex items-start gap-2 text-xs",children:[(0,t.jsx)(r.Compass,{className:"w-3.5 h-3.5 text-warning mt-0.5 shrink-0"}),(0,t.jsxs)("span",{className:"text-text-muted",children:[(0,t.jsx)("span",{className:"text-text font-medium",children:"Seeking:"})," ",e.seeking]})]}),e.offering&&(0,t.jsxs)("div",{className:"flex items-start gap-2 text-xs",children:[(0,t.jsx)(d.CheckCircle2,{className:"w-3.5 h-3.5 text-success mt-0.5 shrink-0"}),(0,t.jsxs)("span",{className:"text-text-muted",children:[(0,t.jsx)("span",{className:"text-text font-medium",children:"Offering:"})," ",e.offering]})]})]}),(0,t.jsx)("div",{className:"bg-bg rounded-lg px-3 py-1.5 mb-3",children:(0,t.jsx)("code",{className:`text-[10px] text-text-muted block ${S===e.id?"break-all":"truncate"}`,children:S===e.id?e.did:`${e.did.slice(0,24)}...`})}),S===e.id&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-bg-elevated text-text-muted",children:e.domain})}),(0,t.jsxs)("button",{disabled:!w||q.has(e.id)||C===e.id,onClick:t=>{t.stopPropagation(),A(e.id)},className:`w-full flex items-center justify-center gap-2 text-sm font-medium py-2 rounded-xl transition-colors ${q.has(e.id)?"bg-success/10 text-success cursor-default":"bg-accent hover:bg-accent-bright text-white disabled:opacity-50"}`,children:[C===e.id?(0,t.jsx)(c.Loader2,{className:"w-3.5 h-3.5 animate-spin"}):q.has(e.id)?(0,t.jsx)(d.CheckCircle2,{className:"w-3.5 h-3.5"}):(0,t.jsx)(o.Send,{className:"w-3.5 h-3.5"}),q.has(e.id)?"Request Sent":"Request Introduction"]})]},e.id))}),p&&!v&&(0,t.jsx)("div",{className:"flex justify-center mt-8",children:(0,t.jsxs)("button",{onClick:U,disabled:g,className:"flex items-center gap-2 bg-bg-card border border-border hover:border-accent/40 text-text px-6 py-2.5 rounded-xl text-sm font-medium transition-colors disabled:opacity-50",children:[g&&(0,t.jsx)(c.Loader2,{className:"w-4 h-4 animate-spin"}),g?"Loading...":"Load More Members"]})})]})]})}e.s(["default",()=>m])}]);