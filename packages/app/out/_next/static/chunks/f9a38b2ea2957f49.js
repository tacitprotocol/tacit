(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,20698,e=>{"use strict";let t=(0,e.i(15315).default)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 6v6l4 2",key:"mmk7yg"}]]);e.s(["Clock",()=>t],20698)},49493,e=>{"use strict";let t=(0,e.i(15315).default)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);e.s(["Inbox",()=>t],49493)},77786,e=>{"use strict";var t=e.i(73942),s=e.i(28787),a=e.i(8013),r=e.i(23082),i=e.i(49493),n=e.i(69553),l=e.i(61776),c=e.i(15703),d=e.i(15315);let o=(0,d.default)("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),m=(0,d.default)("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);var x=e.i(74898),u=e.i(20698),g=e.i(38854),h=e.i(20797);function p(){let e=(0,a.createClient)(),[d,p]=(0,s.useState)("incoming"),[b,f]=(0,s.useState)([]),[j,v]=(0,s.useState)([]),[N,y]=(0,s.useState)(!0),[w,_]=(0,s.useState)(null),[k,q]=(0,s.useState)(null),{toast:C}=(0,h.useToast)();async function S(){let{data:{user:t}}=await e.auth.getUser();if(!t)return;let[s,a]=await Promise.all([e.from("engagement_requests").select("*, profiles!engagement_requests_user_id_fkey(display_name, trust_score, trust_level, bio, seeking, offering, avatar_url)").eq("target_id",t.id).order("created_at",{ascending:!1}),e.from("engagement_requests").select("*, profiles!engagement_requests_target_id_fkey(display_name, trust_score, trust_level, bio, seeking, offering, avatar_url)").eq("user_id",t.id).order("created_at",{ascending:!1})]);s.error&&(console.error("Failed to load incoming:",s.error.message),_("Failed to load incoming requests. Please refresh the page.")),a.error&&(console.error("Failed to load outgoing:",a.error.message),s.error||_("Failed to load outgoing requests. Please refresh the page.")),f(s.data||[]),v(a.data||[]),y(!1)}async function T(t,s){q(t),_(null);let{error:a}=await e.from("engagement_requests").update({status:s}).eq("id",t);a?(_(`Failed to ${"accepted"===s?"accept":"decline"} request.`),C(`Failed to ${"accepted"===s?"accept":"decline"} request`,"error")):(f(e=>e.map(e=>e.id===t?{...e,status:s}:e)),C("accepted"===s?"Match accepted! You can now message them.":"Request declined.","accepted"===s?"success":"info")),q(null)}(0,s.useEffect)(()=>{S()},[]);let M="incoming"===d?b:j,I=b.filter(e=>"pending"===e.status);return(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-1",children:"Matches"}),(0,t.jsx)("p",{className:"text-text-muted mb-8",children:"Introduction proposals from the TACIT matching engine. Double opt-in at every stage."}),w&&(0,t.jsx)("div",{className:"mb-4 p-3 bg-danger/10 border border-danger/30 rounded-xl text-sm text-danger",children:w}),(0,t.jsxs)("div",{className:"flex gap-1 mb-6 bg-bg-card border border-border rounded-xl p-1 w-fit",children:[(0,t.jsxs)("button",{onClick:()=>p("incoming"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"incoming"===d?"bg-accent text-white":"text-text-muted hover:text-text"}`,children:[(0,t.jsx)(m,{className:"w-4 h-4"}),"Incoming",I.length>0&&(0,t.jsx)("span",{className:"bg-danger text-white text-[10px] px-1.5 py-0.5 rounded-full",children:I.length})]}),(0,t.jsxs)("button",{onClick:()=>p("outgoing"),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${"outgoing"===d?"bg-accent text-white":"text-text-muted hover:text-text"}`,children:[(0,t.jsx)(o,{className:"w-4 h-4"}),"Outgoing"]})]}),N?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(n.Loader2,{className:"w-8 h-8 text-accent animate-spin"})}):0===M.length?(0,t.jsxs)("div",{className:"bg-bg-card border border-border rounded-2xl p-12 text-center",children:[(0,t.jsx)(i.Inbox,{className:"w-16 h-16 text-text-muted mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"incoming"===d?"No incoming requests":"No outgoing requests"}),(0,t.jsx)("p",{className:"text-text-muted text-sm mb-6 max-w-md mx-auto",children:"incoming"===d?"When someone wants to connect with you, their request will appear here. Both parties must accept before any identity is revealed.":"Requests you send to other members will appear here."}),(0,t.jsxs)(g.default,{href:"/discover",className:"inline-flex items-center gap-2 bg-accent hover:bg-accent-bright text-white px-5 py-2.5 rounded-xl text-sm font-medium transition-colors",children:[(0,t.jsx)(r.Users,{className:"w-4 h-4"}),"Browse Network"]})]}):(0,t.jsx)("div",{className:"space-y-4",children:M.map(e=>{let s=e.profiles;return(0,t.jsxs)("div",{className:"bg-bg-card border border-border rounded-2xl p-5 hover:border-border-bright transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-bg-elevated flex items-center justify-center overflow-hidden",children:s?.avatar_url?(0,t.jsx)("img",{src:s.avatar_url,alt:"",className:"w-full h-full object-cover"}):(0,t.jsx)("span",{className:"text-sm font-bold text-text-muted",children:s?.display_name?.charAt(0)?.toUpperCase()||"?"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:s?.display_name||"Unknown User"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-text-muted",children:[(0,t.jsx)(x.Shield,{className:"w-3 h-3"}),"Trust: ",s?.trust_score||0,(0,t.jsx)("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] ${s?.trust_level==="trusted"||s?.trust_level==="exemplary"?"bg-success/10 text-success":"bg-bg-elevated text-text-muted"}`,children:s?.trust_level||"new"})]})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${"pending"===e.status?"bg-warning/10 text-warning":"accepted"===e.status?"bg-success/10 text-success":"declined"===e.status?"bg-danger/10 text-danger":"bg-bg-elevated text-text-muted"}`,children:e.status})})]}),s?.bio&&(0,t.jsx)("p",{className:"text-sm text-text-muted mt-3 line-clamp-2",children:s.bio}),(0,t.jsxs)("div",{className:"flex gap-4 mt-2 text-xs text-text-muted",children:[s?.seeking&&(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-text font-medium",children:"Seeking:"})," ",s.seeking]}),s?.offering&&(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"text-text font-medium",children:"Offering:"})," ",s.offering]})]}),e.message&&(0,t.jsxs)("p",{className:"text-sm text-text-muted mt-2 italic",children:["“",e.message,"”"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-2 text-[10px] text-text-muted",children:[(0,t.jsx)(u.Clock,{className:"w-3 h-3"}),new Date(e.created_at).toLocaleDateString()]}),"incoming"===d&&"pending"===e.status&&(0,t.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,t.jsxs)("button",{onClick:()=>T(e.id,"accepted"),disabled:k===e.id,className:"flex items-center gap-1.5 bg-success hover:bg-success/90 text-white px-4 py-2 rounded-xl text-sm font-medium transition-colors disabled:opacity-50",children:[k===e.id?(0,t.jsx)(n.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(l.CheckCircle2,{className:"w-4 h-4"}),"Accept"]}),(0,t.jsxs)("button",{onClick:()=>T(e.id,"declined"),disabled:k===e.id,className:"flex items-center gap-1.5 bg-bg-elevated hover:bg-danger/10 text-text-muted hover:text-danger px-4 py-2 rounded-xl text-sm font-medium transition-colors disabled:opacity-50",children:[(0,t.jsx)(c.XCircle,{className:"w-4 h-4"}),"Decline"]})]})]},e.id)})}),(0,t.jsxs)("div",{className:"mt-8 bg-bg-card border border-border rounded-2xl p-6",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"How TACIT Matching Works"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-accent/10 text-accent rounded-lg flex items-center justify-center text-sm font-bold mb-2",children:"1"}),(0,t.jsx)("h4",{className:"text-sm font-medium mb-1",children:"Publish Intent"}),(0,t.jsx)("p",{className:"text-xs text-text-muted",children:"Describe what you're seeking and offering. The engine scores compatibility across 5 dimensions."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-accent/10 text-accent rounded-lg flex items-center justify-center text-sm font-bold mb-2",children:"2"}),(0,t.jsx)("h4",{className:"text-sm font-medium mb-1",children:"Double Opt-In"}),(0,t.jsx)("p",{className:"text-xs text-text-muted",children:"Both parties review the match score and rationale. No contact happens until both accept."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-accent/10 text-accent rounded-lg flex items-center justify-center text-sm font-bold mb-2",children:"3"}),(0,t.jsx)("h4",{className:"text-sm font-medium mb-1",children:"Progressive Reveal"}),(0,t.jsx)("p",{className:"text-xs text-text-muted",children:"Start with context only. Reveal your identity in stages, always with mutual consent."})]})]})]})]})}e.s(["default",()=>p],77786)}]);