(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61776,e=>{"use strict";let t=(0,e.i(15315).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],61776)},37214,e=>{"use strict";let t=(0,e.i(15315).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>t],37214)},51639,e=>{"use strict";var t=e.i(73942),s=e.i(28787),a=e.i(8013),r=e.i(59776),l=e.i(37214),i=e.i(74898),d=e.i(61776),c=e.i(23082),n=e.i(69553);let o=(0,e.i(15315).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);function m(){let e=(0,a.createClient)(),[m,x]=(0,s.useState)([]),[u,h]=(0,s.useState)(!0),[p,g]=(0,s.useState)(null),[f,b]=(0,s.useState)(""),[j,N]=(0,s.useState)(""),[v,y]=(0,s.useState)(null),[w,k]=(0,s.useState)(null),[_,C]=(0,s.useState)(new Set),[S,q]=(0,s.useState)(null);async function L(t){k(t),q(null);let{error:s}=await e.from("engagement_requests").insert({user_id:j,target_id:t,request_type:"introduction",status:"pending"});s?(console.error("Failed to send request:",s.message),q("Failed to send introduction request.")):C(e=>new Set(e).add(t)),k(null)}(0,s.useEffect)(()=>{!async function(){let{data:{user:t}}=await e.auth.getUser();t&&N(t.id);let[s,a]=await Promise.all([e.from("profiles").select("id, did, display_name, bio, avatar_url, trust_score, trust_level, seeking, offering, domain").eq("onboarding_complete",!0).order("trust_score",{ascending:!1}).limit(50),t?e.from("engagement_requests").select("target_id").eq("user_id",t.id):Promise.resolve({data:[],error:null})]);s.error&&(console.error("Failed to load profiles:",s.error.message),g("Failed to load network members. Please refresh the page.")),s.data&&x(s.data),a.data&&C(new Set(a.data.map(e=>e.target_id))),h(!1)}()},[e]);let T=m.filter(e=>{if(e.id===j)return!1;if(!f)return!0;let t=f.toLowerCase();return e.display_name.toLowerCase().includes(t)||e.bio?.toLowerCase().includes(t)||e.seeking?.toLowerCase().includes(t)||e.offering?.toLowerCase().includes(t)});return(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-1",children:"Discover"}),(0,t.jsx)("p",{className:"text-text-muted mb-8",children:"Browse verified members of the TACIT network. Everyone here has a cryptographic identity."}),(p||S)&&(0,t.jsx)("div",{className:"mb-6 p-3 bg-danger/10 border border-danger/30 rounded-xl text-sm text-danger",children:p||S}),(0,t.jsxs)("div",{className:"relative mb-6",children:[(0,t.jsx)(l.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted"}),(0,t.jsx)("input",{type:"text",value:f,onChange:e=>b(e.target.value),placeholder:"Search by name, skills, or what people are seeking...",className:"w-full bg-bg-card border border-border rounded-xl pl-12 pr-4 py-3 text-text focus:outline-none focus:border-accent"})]}),u?(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)(n.Loader2,{className:"w-8 h-8 text-accent animate-spin"})}):0===T.length?(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)(c.Users,{className:"w-12 h-12 text-text-muted mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:f?"No matches found":"No members yet"}),(0,t.jsx)("p",{className:"text-text-muted text-sm",children:f?"Try a different search term":"Be one of the first to join the verified network!"})]}):(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map(e=>(0,t.jsxs)("div",{onClick:()=>y(v===e.id?null:e.id),className:`bg-bg-card border rounded-2xl p-5 transition-colors cursor-pointer ${v===e.id?"border-accent/40":"border-border hover:border-border-bright"}`,children:[(0,t.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-xl bg-bg-elevated flex items-center justify-center overflow-hidden",children:e.avatar_url?(0,t.jsx)("img",{src:e.avatar_url,alt:e.display_name,className:"w-full h-full object-cover"}):(0,t.jsx)("span",{className:"text-sm font-bold text-text-muted",children:e.display_name.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:e.display_name}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-xs text-text-muted",children:[(0,t.jsx)(i.Shield,{className:"w-3 h-3"}),"Score: ",e.trust_score]})]})]}),(0,t.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full ${"trusted"===e.trust_level||"exemplary"===e.trust_level?"bg-success/10 text-success":"established"===e.trust_level?"bg-accent/10 text-accent":"bg-bg-elevated text-text-muted"}`,children:e.trust_level})]}),e.bio&&(0,t.jsx)("p",{className:`text-sm text-text-muted mb-3 ${v===e.id?"":"line-clamp-2"}`,children:e.bio}),(0,t.jsxs)("div",{className:"space-y-1.5 mb-4",children:[e.seeking&&(0,t.jsxs)("div",{className:"flex items-start gap-2 text-xs",children:[(0,t.jsx)(r.Compass,{className:"w-3.5 h-3.5 text-warning mt-0.5 shrink-0"}),(0,t.jsxs)("span",{className:"text-text-muted",children:[(0,t.jsx)("span",{className:"text-text font-medium",children:"Seeking:"})," ",e.seeking]})]}),e.offering&&(0,t.jsxs)("div",{className:"flex items-start gap-2 text-xs",children:[(0,t.jsx)(d.CheckCircle2,{className:"w-3.5 h-3.5 text-success mt-0.5 shrink-0"}),(0,t.jsxs)("span",{className:"text-text-muted",children:[(0,t.jsx)("span",{className:"text-text font-medium",children:"Offering:"})," ",e.offering]})]})]}),(0,t.jsx)("div",{className:"bg-bg rounded-lg px-3 py-1.5 mb-3",children:(0,t.jsx)("code",{className:`text-[10px] text-text-muted block ${v===e.id?"break-all":"truncate"}`,children:v===e.id?e.did:`${e.did.slice(0,24)}...`})}),v===e.id&&(0,t.jsx)("div",{className:"mb-3",children:(0,t.jsx)("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-bg-elevated text-text-muted",children:e.domain})}),(0,t.jsxs)("button",{disabled:!j||_.has(e.id)||w===e.id,onClick:t=>{t.stopPropagation(),L(e.id)},className:`w-full flex items-center justify-center gap-2 text-sm font-medium py-2 rounded-xl transition-colors ${_.has(e.id)?"bg-success/10 text-success cursor-default":"bg-accent hover:bg-accent-bright text-white disabled:opacity-50"}`,children:[w===e.id?(0,t.jsx)(n.Loader2,{className:"w-3.5 h-3.5 animate-spin"}):_.has(e.id)?(0,t.jsx)(d.CheckCircle2,{className:"w-3.5 h-3.5"}):(0,t.jsx)(o,{className:"w-3.5 h-3.5"}),_.has(e.id)?"Request Sent":"Request Introduction"]})]},e.id))})]})}e.s(["default",()=>m],51639)}]);